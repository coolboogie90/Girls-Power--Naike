<%- include('partials/header'); -%>

    <div class="container">
        <br>
        <div class="dashboard__back"><i class='bx bxs-chevrons-left'></i>
            <a href="/dashboard" class="dashboard-link">Back To The Dashboard</a>
        </div>
        <br>
        <h1>Update</h1>

        <form method="post">
            <label>Job Title</label>
            <input type="text" name="jobTitle" value="<%= offer.jobTitle %>" />
            <div class="jobTitle error"></div>

            <label>Website</label>
            <input type="text" name="url" value="<%= offer.url %>" />
            <div class="url error"></div>

            <label>Name</label>
            <input type="text" name="employerName" value="<%= offer.employerName %>" />
            <div class="employerName error"></div>

            <label>Email of contact</label>
            <input type="text" name="employerEmail" value="<%= offer.employerEmail %>" />
            <div class="employerEmail error"></div>

            <label>Phone</label>
            <input type="text" name="employerPhone" value="<%= offer.employerPhone %>" />
            <br>

            <label>Address</label>
            <input type="text" name="employerAddress" value="<%= offer.employerAddress %>" />
            <br>

            <label for="offerOrigin">Origin</label>
            <select name="offerOrigin" id="offerOrigin" value="<%= offer.offerOrigin %>">
                <option value="Candidature spontanÃ©e">Spontaneous Application</option>
                <option value="Job offer">Job Offer</option>
            </select>
            <div class="offerOrigin error"></div>
            <br>

            <label for="offerStatus">Status</label>
            <select name="offerStatus" id="offerStatus" value="<%= offer.offerStatus %>">
                <option value="Interested">Interested</option>
                <option value="Resume sent">Resume Sent</option>
                <option value="Negative">Negative</option>
                <option value="Interview">Interview</option>
                <option value="Archive">Archive</option>
            </select>
            <div class="offerStatus error"></div>
            <br>

            <label for="comments">Comments</label>
            <textarea name="comments" id="comments"><%= offer.comments %></textarea><br>

            <button>Update</button>
        </form>
    </div>

    <%- include('partials/footer'); -%>


        <!-- <script>
    const form = document.querySelector("form");
    const jobTitleError = document.querySelector(".jobTitle.error");
    const urlError = document.querySelector(".url.error");
    const employerNameError = document.querySelector(".employerName.error");
    const employerEmailError = document.querySelector(".employerEmail.error");
    const originError = document.querySelector(".offerOrigin.error");
    const statusError = document.querySelector(".offerStatus.error");
    
    form.addEventListener("submit", async (e) => {
        e.preventDefault();
        
        // reset errors
        jobTitleError.textContent = "";
        urlError.textContent = "";
        employerNameError.textContent = "";
        employerEmailError.textContent = "";
        originError.textContent = "";
        statusError.textContent = "";
        
        // get values
        const jobTitle = form.jobTitle.value;
        const url = form.url.value;
        const employerName = form.employerName.value;
        const employerEmail = form.employerEmail.value;
        const employerPhone = form.employerPhone.value;
        const employerAddress = form.employerAddress.value;
        const offerOrigin = form.offerOrigin.value;
        const offerStatus = form.offerStatus.value;
        const comments = form.comments.value;
        
        console.log(jobTitle, url, employerName, employerEmail, origin, status);
        try {
            const res = await fetch("/update", {
                method: "POST",
                body: JSON.stringify({ jobTitle, url, employerName, employerEmail, employerPhone, employerAddress, offerOrigin, offerStatus, comments }),
                headers: { "Content-Type": "application/json" },
            });
            const data = await res.json();
            console.log(data);
            if (data.user) {
                alert('Job offer created successfully!');
                location.assign("/");
            }
        } catch (err) {
            console.log(err);
        }
    });
</script> -->